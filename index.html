<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ö”©–±–µ–π—Ç—É –∫–µ—Å—Ç–µ—Å—ñ ‚Äî –¢–µ—Å—Ç</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#f4f6fb;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
    margin:0;
}

.container{
    width:90%;
    max-width:600px;
    background:#fff;
    padding:30px;
    border-radius:16px;
    box-shadow:0 0 25px rgba(0,0,0,.15);
    text-align:center;
    position:relative;
}

.scoreboard{
    position:absolute;
    right:20px;
    top:20px;
    display:none;
}
.score{
    font-size:18px;
    font-weight:bold;
}
.correct{color:green;}
.wrong{color:red;}

.topbar{
    display:flex;
    justify-content:center;
    align-items:center;
    gap:20px;
}

button{
    background:#4a6cf7;
    color:white;
    padding:10px 18px;
    font-size:16px;
    border:none;
    border-radius:10px;
    cursor:pointer;
}
button:hover{background:#3452d1}

#startBtn{
    margin-top:12px;
}

#question{
    font-size:36px;
    font-weight:bold;
    margin:20px 0;
}

/* üîí INPUT ‚Äî FAOL EMAS, FAQAT KO‚ÄòRINADI */
#answer{
    font-size:26px;
    padding:10px;
    width:200px;
    text-align:center;
    caret-color:transparent;
    user-select:none;
    background:#f0f2f7;
}

/* === TIMER === */
#timer{
    display:none;
    font-size:22px;
    color:red;
    font-weight:bold;
}

/* === NUMPAD === */
.numpad-wrap{
    display:flex;
    justify-content:center;
    gap:16px;
    margin:20px 0;
}

.numpad{
    display:grid;
    grid-template-columns:repeat(3,90px);
    gap:15px;
}

.key{
    width:90px;
    height:80px;
    font-size:28px;
    font-weight:bold;
    border-radius:16px;
    border:1.5px solid rgba(0,0,0,.35);
    background:linear-gradient(145deg,#ffffff,#d9dce3);
    box-shadow:6px 6px 12px #c5c8ce,
               -6px -6px 12px #ffffff;
    cursor:pointer;
}
.key:active{
    box-shadow:inset 4px 4px 8px #c5c8ce,
               inset -4px -4px 8px #ffffff;
    transform:scale(.97);
}

.next-key{
    width:90px;
    height:80px;
}

/* === MOBILE === */
@media (max-width:480px){
    body{
        align-items:flex-start;
    }
    .container{
        margin:10px;
        padding:20px;
    }
    #question{font-size:28px;}
    #answer{width:160px;font-size:22px;}

    .numpad-wrap{
        flex-direction:column;
        gap:12px;
    }
    .numpad{
        grid-template-columns:repeat(3,60px);
        gap:8px;
    }
    .key,.next-key{
        width:60px;
        height:50px;
        font-size:20px;
        border-radius:10px;
    }
}
</style>
</head>

<body>
<div class="container">
<h2>–ö”©–±–µ–π—Ç—É –∫–µ—Å—Ç–µ—Å—ñ ‚Äî –¢–µ—Å—Ç</h2>

<div class="topbar" id="topbar">
    <button id="soundBtn" onclick="toggleSound()">üîä –î—ã–±—ã—Å: ON</button>
    <div id="timer">5</div>
</div>

<button id="startBtn" onclick="startGame()">‚ñ∂ –ë–∞—Å—Ç–∞—É</button>

<div class="scoreboard">
    <div class="score correct">‚úÖ –î—É—Ä—ã—Å: <span id="correctCount">0</span></div>
    <div class="score wrong">‚ùå “ö–∞—Ç–µ: <span id="wrongCount">0</span></div>
</div>

<div id="game" style="display:none;">
    <div id="question"></div>

    <!-- üîí KLAVIATURA CHIQMAYDI -->
    <input id="answer" placeholder="–ñ–∞—É–∞–ø" readonly onfocus="this.blur()">

    <div class="numpad-wrap">
        <div class="numpad">
            <button class="key" onclick="pressNum(7)">7</button>
            <button class="key" onclick="pressNum(8)">8</button>
            <button class="key" onclick="pressNum(9)">9</button>

            <button class="key" onclick="pressNum(4)">4</button>
            <button class="key" onclick="pressNum(5)">5</button>
            <button class="key" onclick="pressNum(6)">6</button>

            <button class="key" onclick="pressNum(1)">1</button>
            <button class="key" onclick="pressNum(2)">2</button>
            <button class="key" onclick="pressNum(3)">3</button>

            <button class="key" onclick="backspace()">‚å´</button>
            <button class="key" onclick="pressNum(0)">0</button>
            <button class="key" onclick="checkAnswer(false)">‚úî</button>
        </div>

        <button class="key next-key" onclick="nextQuestion()">‚è≠</button>
    </div>
</div>

<div id="summary"></div>
</div>

<audio id="okSound" src="durys.mp3"></audio>
<audio id="errSound" src="qate.mp3"></audio>
<audio id="clickSound" src="click1.mp3"></audio>

<script>
let soundOn = localStorage.getItem("soundOn") !== "false";
const okSound = document.getElementById("okSound");
const errSound = document.getElementById("errSound");
const clickSound = document.getElementById("clickSound");
let audioUnlocked=false;

function unlockAudio(){
    if(audioUnlocked) return;
    [okSound,errSound,clickSound].forEach(a=>{
        a.play().then(()=>{a.pause();a.currentTime=0}).catch(()=>{});
    });
    audioUnlocked=true;
}
function playSound(a){
    if(soundOn && audioUnlocked){
        a.currentTime=0;
        a.play().catch(()=>{});
    }
}
function toggleSound(){
    soundOn=!soundOn;
    localStorage.setItem("soundOn",soundOn);
    soundBtn.textContent=soundOn?"üîä –î—ã–±—ã—Å: ON":"üîá –î—ã–±—ã—Å: OFF";
}

let questions=[],index=0,correct=0,wrong=0,checked=false,timer;
const maxQuestions=30;

const answer=document.getElementById("answer");
const question=document.getElementById("question");
const game=document.getElementById("game");
const timerEl=document.getElementById("timer");

function startGame(){
    unlockAudio();
    index=correct=wrong=0;
    questions=[];
    for(let a=2;a<=9;a++){
        for(let b=1;b<=10;b++){
            questions.push({a,b,ans:a*b});
        }
    }
    questions.sort(()=>Math.random()-0.5);
    questions=questions.slice(0,maxQuestions);
    document.getElementById("startBtn").style.display="none";
    document.querySelector(".scoreboard").style.display="block";
    timerEl.style.display="block";
    game.style.display="block";
    showQuestion();
}

function showQuestion(){
    if(index>=maxQuestions) return;
    checked=false;
    const q=questions[index];
    question.textContent=`${q.a} √ó ${q.b} = ?`;
    answer.value="";
    startTimer();
}

function startTimer(){
    let t=5;
    timerEl.textContent=t;
    clearInterval(timer);
    timer=setInterval(()=>{
        t--;
        timerEl.textContent=t;
        if(t<=0){
            clearInterval(timer);
            checkAnswer(true);
        }
    },1000);
}

function checkAnswer(timeOver){
    if(checked) return;
    checked=true;
    clearInterval(timer);
    const q=questions[index];
    if(parseInt(answer.value)!==q.ans){
        playSound(errSound);
    }else{
        playSound(okSound);
    }
    question.textContent=`${q.a} √ó ${q.b} = ${q.ans}`;
    index++;
}

function pressNum(n){
    if(!checked){
        answer.value+=n;
        playSound(clickSound);
    }
}
function backspace(){
    answer.value=answer.value.slice(0,-1);
    playSound(clickSound);
}
function nextQuestion(){
    if(!checked) checkAnswer(false);
    showQuestion();
}
</script>
</body>
</html>
